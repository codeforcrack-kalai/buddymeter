<!DOCTYPE html>
<html lang="en">
<head>
  <title>Choose 1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  <script src="js/techmyntra.js">
</script>
</head>
<style>
.card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    transition: 0.3s;
    width: 100%;
    border-radius: 5px;
}

.card:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}

img {
    border-radius: 5px 5px 0 0;
}

.container {
    padding: 2px 16px;
}

label > input{ /* HIDE RADIO */
  visibility: hidden; /* Makes input not-clickable */
  position: absolute; /* Remove input from document flow */
}
label > input + img{ /* IMAGE STYLES */
  cursor:pointer;
  border:2px solid transparent;
}
label > input:checked + img{ /* (RADIO CHECKED) IMAGE STYLES */
  border:2px solid #f00;
}
</style>
<body onload="get_user();"> 

   <script type="text/javascript">
    var q=localStorage.getItem("quiz");
    if(q=='true')
{
 window.location.href="created.html";

}
  </script>
 
<div class="container">
  <h2>Choose <span style="color: red;">One</span> </h2>

  <div class="card" >
    <div class="card-body">
    

<div class="alert alert-primary" role="alert">
  Dear <span id="name"></span> ,  create your quiz!

  <span id="token"> </span>
</div>



 <script>

  var url = "www.site.com/index.php#hello";
var hash = url.substring(url.indexOf('#')+1);
alert(hash);





  var qid;
  var qname;
  var qoption1;
  var qoption2;
  var qanswer;
  var qc=1;
  var qtoken;
  var option1_text;
  var option2_text;
     
  function getrandomnum(){


 var x ;

    x = Math.floor((Math.random() * 3) + 1);
   // window.alert(x);

  //var qnum = document.getElementById(qnum).value;
  //var ranNums = shuffle([1,2,3,4,5,6,7,8,9,10]);

//var x=ranNums.next().value;

var xmlhttp = new XMLHttpRequest();
var url = "api/quiz.php?id="+x;

xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var myArr = JSON.parse(this.responseText);
        
         qid =document.getElementById("qid").innerHTML = myArr.id;
         qname=document.getElementById("question").innerHTML = myArr.question;
          qoption1=document.getElementById("option1").src  = myArr.option1_url;
         qoption2=document.getElementById("option2").src  = myArr.option2_url;
         option1_text=document.getElementById("option1_text").innerHTML  = myArr.option1_text;
         option2_text=document.getElementById("option2_text").innerHTML  = myArr.option2_text;

    }
};
xmlhttp.open("GET", url, true);
xmlhttp.send();

}

     
  


 var x=1 ;

  //  x = Math.floor((Math.random() * 3) + 1);
   // window.alert(x);

  //var qnum = document.getElementById(qnum).value;

var xmlhttp = new XMLHttpRequest();
var url = "api/quiz.php?id="+x;

xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var myArr = JSON.parse(this.responseText);
        

         qid =document.getElementById("qid").innerHTML = myArr.id;
         qname=document.getElementById("question").innerHTML = myArr.question;
          qoption1=document.getElementById("option1").src  = myArr.option1_url;
         qoption2=document.getElementById("option2").src  = myArr.option2_url;
         option1_text=document.getElementById("option1_text").innerHTML  = myArr.option1_text;
         option2_text=document.getElementById("option2_text").innerHTML  = myArr.option2_text;


    }
};
xmlhttp.open("GET", url, true);
xmlhttp.send();





</script>


  <div class="row">
    <div class="col-lg-12 col-md-12">
      <span id="qid"></span>
      <h2 id="question"></h2>
    </div>
    <div class="col-lg-3 col-md-3 col-xs-3">
<label>
    <input type="radio" name="option" value="1" id="myRadio" onclick="handleClick(this);" />
    <img id="option1" src="" width="200x200"><br>

    <div style="padding: 12px;background-color: #efefef;text-align: center;font-size:22px; " id="option1_text"></div>

  </label>
    </div>

     <div class="col-lg-3 col-md-3 col-xs-3">
<label>
    <input type="radio" name="option" value="2" id="myRadio" onclick="handleClick(this);" />
    <img id="option2" src="" width="200x200"><br>
    <div style="padding: 12px;background-color: #efefef;text-align: center;font-size:22px; " id="option2_text"></div>
  </label>
    </div>
    <div id="id01"></div>

<script type="text/javascript">
  var currentValue = 0;
function handleClick(myRadio) {
   // alert('Old value: ' + currentValue);
     qanswer=currentValue;
var lab=localStorage.getItem("lab");
var n=localStorage.getItem("name");
var t=localStorage.getItem("token");

       
    //alert('answer: ' + myRadio.value+'question_id'+qid+'question_name'+qname+'question_option1'+qoption1+'question_option2'+qoption2+'qc'+qc+'qtoken'+t,+'opt1text'+option1_text,+'opt2text'+option2_text);

     //   var xmlhttp12 = new XMLHttpRequest();
  //  var key='Gd243vdfgdfgfdgfd55554GFFDGFDGSGSDsaDSF';
//var url = "api/quiz_store.php?name="+n+'&token='+t+'&qid='+qid+'&qname='+qname+'&option1_url='+qoption1+'&option2_url='+qoption2+'&option1_text='+option1_text+'&option2_text='+option2_text+'&answer='+myRadio.value;

//xmlhttp12.onreadystatechange = function() {
   // if (this.readyState == 4 && this.status == 200) {
      //  var myArr122 = JSON.parse(this.responseText);
     //   window.alert(responseText);
        

        // document.getElementById("question").innerHTML = myArr.question;
          //document.getElementById("option1").src  = myArr.option1;
        // document.getElementById("option2").src  = myArr.option2;



  //  }
//};
//xmlhttp12.open("GET", url, true);
//xmlhttp12.send();

 var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange=function() {
    if (this.readyState == 4 && this.status == 200) {
    
      var s= JSON.parse(this.responseText);
      var s1=s.response_code;
       // window.alert('response_code'+s.response_code);

        if(s1==10)
        {
            qc=qc+1;
            if(qc==11)
            {

              window.alert('Share link');
             // http://localhost/techmyntra/qiz/

    store_quiz_id();

               window.location.href="created.html";
            }



    getrandomnum();
        }
        else
        {

          window.alert('Sorry Try Again');
        }
    }
  };



  xhttp.open("POST", "api/quiz_store.php?name="+n+'&token='+t+'&qid='+qid+'&qname='+qname+'&option1_url='+qoption1+'&option2_url='+qoption2+'&option1_text='+option1_text+'&option2_text='+option2_text+'&answer='+myRadio.value+"&key=Gd243vdfgdfgfdgfd55554GFFDGFDGSGSDsaDSF");
  xhttp.send();

    currentValue = myRadio.value;

    var qcdispla='Question '+qc+'/10';
    document.getElementById("qc").innerHTML = qcdispla;


  
}
</script>


  </div>
  <button type="button" class="btn btn-success" value="" id="qc" >Question 1/10</button>

  <button type="button" class="btn btn-warning" onclick="getrandomnum();">Skip this question &gt;&gt;&gt;</button>


    </div>
  </div>
</div>


</body>
</html>
